{% extends "base.html" %}
{% load tailwind_filters %}

{% block content %}
    <style>
        /* Phone number widget styling */
        select[id*="phone_number"] {
            font-family: "Segoe UI Emoji", "Apple Color Emoji", "Noto Color Emoji", "Segoe UI", Tahoma, Geneva, Verdana, sans-serif !important;
            font-size: 14px !important;
            background-color: white !important;
            border: 1px solid #d1d5db !important;
            border-radius: 6px !important;
            padding: 8px 12px !important;
        }
        
        /* Ensure emojis are displayed properly */
        select[id*="phone_number"] option {
            font-family: "Segoe UI Emoji", "Apple Color Emoji", "Noto Color Emoji", "Segoe UI", Tahoma, Geneva, Verdana, sans-serif !important;
            padding: 4px 8px !important;
        }
        
        /* Phone input styling */
        input[id*="phone_number"] {
            border: 1px solid #d1d5db !important;
            border-radius: 6px !important;
            padding: 8px 12px !important;
        }
    </style>
    <div class="max-w-lg mx-auto">
        <!-- Signup Header -->
        <div class="text-center mb-8 mt-8">
            <h1 class="text-4xl font-bold text-gray-900 mb-2">Sign Up</h1>
            <p class="text-gray-600 text-lg">Create your account to get started</p>
            <div class="w-24 h-1 bg-blue-500 mx-auto mt-4 rounded"></div>
        </div>
        
        <form method="POST" class="mt-5" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form|crispy }}
            <div id="profile-preview-container" class="mt-3 hidden">
                <p class="text-sm text-gray-600 mb-2">Profile Photo Preview:</p>
                <img id="profile-preview" src="" alt="Preview" class="w-24 h-24 rounded-full object-cover border-2 border-gray-200">
            </div>
            <div class="flex items-center mt-2">
                <input id="show-password" type="checkbox" class="mr-2">
                <label for="show-password">Show Password</label>
            </div>
            <button type="submit" class="w-full text-white bg-blue-500 hover:bg-blue-600 px-3 py-2 rounded-md">Signup</button>
        </form>
        <div class="py-5 border-t border-gray-200 mt-5">
            <a class="hover:text-blue-500 mt-3" href="{% url 'login' %}">Already have an account?</a>
        </div>
    </div>

    <script>
        var profileInput = document.getElementById('id_profile_image') || document.querySelector('input[name="profile_image"]');
        if (profileInput) {
            profileInput.addEventListener('change', function(e) {
                var file = e.target.files[0];
                var preview = document.getElementById('profile-preview');
                var container = document.getElementById('profile-preview-container');
                if (file && file.type.startsWith('image/')) {
                    var reader = new FileReader();
                    reader.onload = function(ev) {
                        preview.src = ev.target.result;
                        container.classList.remove('hidden');
                    };
                    reader.readAsDataURL(file);
                } else {
                    preview.src = '';
                    container.classList.add('hidden');
                }
            });
        }
        document.getElementById('show-password').addEventListener('change', function() {
            var passwordFields = document.querySelectorAll('input[type=password], input[type=text][data-type="password"]');
            passwordFields.forEach(function(passwordField) {
                if (passwordField.type === 'password') {
                    passwordField.type = 'text';
                    passwordField.setAttribute('data-type', 'password');
                } else {
                    passwordField.type = 'password';
                    passwordField.removeAttribute('data-type');
                }
            });
        });
    </script>
{% endblock content %}
