{% extends "base.html" %}

{% block content %}


     <section class="text-gray-600 body-font">
        <div class="container px-5 py-24 mx-auto flex flex-wrap">
           <div class="w-full mb-6 py-6 flex justify-between items-center borber-b border-gray-200">
                 <div>
                        <h1 class="text-4xl text-gray-800">Agents</h1>
                  </div>
                  <div>
                   <a class="text-gray-500 hover:text-blue-500 "href="{% url 'agents:agent-create' %}">Create a new agent</a>
                   </div>
           </div>
            <div class="flex flex-wrap -m-4">
                 {% for agent in object_list %}
                 <div class="p-4 w-full">
                     <div class="flex border-2 {% if agent.user == request.user %}border-blue-500 bg-blue-50{% else %}border-gray-600{% endif %} p-8 sm:flex-row flex-col">
                           <div class="w-16 h-16 sm:mr-8 sm:mb-0 mb-4 inline-flex items-center justify-center rounded-full bg-indigo-100 text-indigo-500 flex-shrink-0">
                                <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-8 h-8" viewBox="0 0 24 24">
                                     <path d="M22 12h-4l-3 9L9 3l-3 9H2"></path>
                                </svg>
                           </div>
                           <div class="flex-grow">
                               <h2 class="text-gray-900 text-lg title-font font-medium mb-3">
                                {{ agent.user.username }} {% if agent.user == request.user %}<span class="text-blue-600 text-sm">(You)</span>{% endif %}</h2>
                          <div class="leading-relaxed text-base mb-3">
                              <p class="mb-1"><strong>Name:</strong> {{ agent.user.first_name }} {{ agent.user.last_name }}</p>
                              <p class="mb-1"><strong>Email:</strong> {{ agent.user.email }}</p>
                              <p class="mb-1"><strong>Status:</strong> {% if agent.user.email_verified %}<span class="text-green-600 font-medium">✓ Verified</span>{% else %}<span class="text-orange-600 font-medium">⏳ Pending Verification</span>{% endif %}</p>
                              {% if request.user.id == 1 or request.user.username == 'berk' %}
                              <p class="mb-1"><strong>Organisation:</strong> <span class="text-purple-600 font-medium">{{ agent.organisation.user.username }}</span></p>
                              {% endif %}
                          </div>
                               <a href="{% url 'agents:agent-detail' agent.pk %}" class="mt-3 text-indigo-500 inline-flex items-center hover:text-blue-900">
                                View agent
                                  <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-4 h-4 ml-2" viewBox="0 0 24 24">
                                  <path d="M5 12h14M12 5l7 7-7 7"></path>
                                  </svg>
                               </a>
                           </div>
                       </div>
                 </div>
                 {% endfor %}
           </div>
        </div>
      </section>   


{% endblock content %}